function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t){var n={exports:{}};return t(n,n.exports),n.exports}var e=n(function(t){var n={};function e(t){return t.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}t.exports=n,n.eastAsianWidth=function(t){var n=t.charCodeAt(0),e=2==t.length?t.charCodeAt(1):0,r=n;return 55296<=n&&n<=56319&&56320<=e&&e<=57343&&(r=(n&=1023)<<10|(e&=1023),r+=65536),12288==r||65281<=r&&r<=65376||65504<=r&&r<=65510?"F":8361==r||65377<=r&&r<=65470||65474<=r&&r<=65479||65482<=r&&r<=65487||65490<=r&&r<=65495||65498<=r&&r<=65500||65512<=r&&r<=65518?"H":4352<=r&&r<=4447||4515<=r&&r<=4519||4602<=r&&r<=4607||9001<=r&&r<=9002||11904<=r&&r<=11929||11931<=r&&r<=12019||12032<=r&&r<=12245||12272<=r&&r<=12283||12289<=r&&r<=12350||12353<=r&&r<=12438||12441<=r&&r<=12543||12549<=r&&r<=12589||12593<=r&&r<=12686||12688<=r&&r<=12730||12736<=r&&r<=12771||12784<=r&&r<=12830||12832<=r&&r<=12871||12880<=r&&r<=13054||13056<=r&&r<=19903||19968<=r&&r<=42124||42128<=r&&r<=42182||43360<=r&&r<=43388||44032<=r&&r<=55203||55216<=r&&r<=55238||55243<=r&&r<=55291||63744<=r&&r<=64255||65040<=r&&r<=65049||65072<=r&&r<=65106||65108<=r&&r<=65126||65128<=r&&r<=65131||110592<=r&&r<=110593||127488<=r&&r<=127490||127504<=r&&r<=127546||127552<=r&&r<=127560||127568<=r&&r<=127569||131072<=r&&r<=194367||177984<=r&&r<=196605||196608<=r&&r<=262141?"W":32<=r&&r<=126||162<=r&&r<=163||165<=r&&r<=166||172==r||175==r||10214<=r&&r<=10221||10629<=r&&r<=10630?"Na":161==r||164==r||167<=r&&r<=168||170==r||173<=r&&r<=174||176<=r&&r<=180||182<=r&&r<=186||188<=r&&r<=191||198==r||208==r||215<=r&&r<=216||222<=r&&r<=225||230==r||232<=r&&r<=234||236<=r&&r<=237||240==r||242<=r&&r<=243||247<=r&&r<=250||252==r||254==r||257==r||273==r||275==r||283==r||294<=r&&r<=295||299==r||305<=r&&r<=307||312==r||319<=r&&r<=322||324==r||328<=r&&r<=331||333==r||338<=r&&r<=339||358<=r&&r<=359||363==r||462==r||464==r||466==r||468==r||470==r||472==r||474==r||476==r||593==r||609==r||708==r||711==r||713<=r&&r<=715||717==r||720==r||728<=r&&r<=731||733==r||735==r||768<=r&&r<=879||913<=r&&r<=929||931<=r&&r<=937||945<=r&&r<=961||963<=r&&r<=969||1025==r||1040<=r&&r<=1103||1105==r||8208==r||8211<=r&&r<=8214||8216<=r&&r<=8217||8220<=r&&r<=8221||8224<=r&&r<=8226||8228<=r&&r<=8231||8240==r||8242<=r&&r<=8243||8245==r||8251==r||8254==r||8308==r||8319==r||8321<=r&&r<=8324||8364==r||8451==r||8453==r||8457==r||8467==r||8470==r||8481<=r&&r<=8482||8486==r||8491==r||8531<=r&&r<=8532||8539<=r&&r<=8542||8544<=r&&r<=8555||8560<=r&&r<=8569||8585==r||8592<=r&&r<=8601||8632<=r&&r<=8633||8658==r||8660==r||8679==r||8704==r||8706<=r&&r<=8707||8711<=r&&r<=8712||8715==r||8719==r||8721==r||8725==r||8730==r||8733<=r&&r<=8736||8739==r||8741==r||8743<=r&&r<=8748||8750==r||8756<=r&&r<=8759||8764<=r&&r<=8765||8776==r||8780==r||8786==r||8800<=r&&r<=8801||8804<=r&&r<=8807||8810<=r&&r<=8811||8814<=r&&r<=8815||8834<=r&&r<=8835||8838<=r&&r<=8839||8853==r||8857==r||8869==r||8895==r||8978==r||9312<=r&&r<=9449||9451<=r&&r<=9547||9552<=r&&r<=9587||9600<=r&&r<=9615||9618<=r&&r<=9621||9632<=r&&r<=9633||9635<=r&&r<=9641||9650<=r&&r<=9651||9654<=r&&r<=9655||9660<=r&&r<=9661||9664<=r&&r<=9665||9670<=r&&r<=9672||9675==r||9678<=r&&r<=9681||9698<=r&&r<=9701||9711==r||9733<=r&&r<=9734||9737==r||9742<=r&&r<=9743||9748<=r&&r<=9749||9756==r||9758==r||9792==r||9794==r||9824<=r&&r<=9825||9827<=r&&r<=9829||9831<=r&&r<=9834||9836<=r&&r<=9837||9839==r||9886<=r&&r<=9887||9918<=r&&r<=9919||9924<=r&&r<=9933||9935<=r&&r<=9953||9955==r||9960<=r&&r<=9983||10045==r||10071==r||10102<=r&&r<=10111||11093<=r&&r<=11097||12872<=r&&r<=12879||57344<=r&&r<=63743||65024<=r&&r<=65039||65533==r||127232<=r&&r<=127242||127248<=r&&r<=127277||127280<=r&&r<=127337||127344<=r&&r<=127386||917760<=r&&r<=917999||983040<=r&&r<=1048573||1048576<=r&&r<=1114109?"A":"N"},n.characterLength=function(t){var n=this.eastAsianWidth(t);return"F"==n||"W"==n||"A"==n?2:1},n.length=function(t){for(var n=e(t),r=0,i=0;i<n.length;i++)r+=this.characterLength(n[i]);return r},n.slice=function(t,r,i){textLen=n.length(t),i=i||1,(r=r||0)<0&&(r=textLen+r),i<0&&(i=textLen+i);for(var s="",o=0,a=e(t),u=0;u<a.length;u++){var c=a[u],h=n.length(c);if(o>=r-(2==h?1:0)){if(!(o+h<=i))break;s+=c}o+=h}return s}}),r=n(function(t,n){!function(n){var e=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:.5*(Math.exp(t)+Math.exp(-t))},r=Math.sinh||function(t){return Math.abs(t)<1e-9?t:.5*(Math.exp(t)-Math.exp(-t))},i=function(){throw SyntaxError("Invalid Param")};function s(t,n){var e=Math.abs(t),r=Math.abs(n);return 0===t?Math.log(r):0===n?Math.log(e):e<3e3&&r<3e3?.5*Math.log(t*t+n*n):(t/=2,n/=2,.5*Math.log(t*t+n*n)+Math.LN2)}function o(t,n){if(!(this instanceof o))return new o(t,n);var e=function(t,n){var e={re:0,im:0};if(null==t)e.re=e.im=0;else if(void 0!==n)e.re=t,e.im=n;else switch(typeof t){case"object":if("im"in t&&"re"in t)e.re=t.re,e.im=t.im;else if("abs"in t&&"arg"in t){if(!Number.isFinite(t.abs)&&Number.isFinite(t.arg))return o.INFINITY;e.re=t.abs*Math.cos(t.arg),e.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!Number.isFinite(t.r)&&Number.isFinite(t.phi))return o.INFINITY;e.re=t.r*Math.cos(t.phi),e.im=t.r*Math.sin(t.phi)}else 2===t.length?(e.re=t[0],e.im=t[1]):i();break;case"string":e.im=e.re=0;var r=t.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),s=1,a=0;null===r&&i();for(var u=0;u<r.length;u++){var c=r[u];" "===c||"\t"===c||"\n"===c||("+"===c?s++:"-"===c?a++:"i"===c||"I"===c?(s+a===0&&i()," "===r[u+1]||isNaN(r[u+1])?e.im+=parseFloat((a%2?"-":"")+"1"):(e.im+=parseFloat((a%2?"-":"")+r[u+1]),u++),s=a=0):((s+a===0||isNaN(c))&&i(),"i"===r[u+1]||"I"===r[u+1]?(e.im+=parseFloat((a%2?"-":"")+c),u++):e.re+=parseFloat((a%2?"-":"")+c),s=a=0))}s+a>0&&i();break;case"number":e.im=0,e.re=t;break;default:i()}return e}(t,n);this.re=e.re,this.im=e.im}o.prototype={re:0,im:0,sign:function(){var t=this.abs();return new o(this.re/t,this.im/t)},add:function(t,n){var e=new o(t,n);return this.isInfinite()&&e.isInfinite()?o.NAN:this.isInfinite()||e.isInfinite()?o.INFINITY:new o(this.re+e.re,this.im+e.im)},sub:function(t,n){var e=new o(t,n);return this.isInfinite()&&e.isInfinite()?o.NAN:this.isInfinite()||e.isInfinite()?o.INFINITY:new o(this.re-e.re,this.im-e.im)},mul:function(t,n){var e=new o(t,n);return this.isInfinite()&&e.isZero()||this.isZero()&&e.isInfinite()?o.NAN:this.isInfinite()||e.isInfinite()?o.INFINITY:0===e.im&&0===this.im?new o(this.re*e.re,0):new o(this.re*e.re-this.im*e.im,this.re*e.im+this.im*e.re)},div:function(t,n){var e=new o(t,n);if(this.isZero()&&e.isZero()||this.isInfinite()&&e.isInfinite())return o.NAN;if(this.isInfinite()||e.isZero())return o.INFINITY;if(this.isZero()||e.isInfinite())return o.ZERO;t=this.re,n=this.im;var r,i,s=e.re,a=e.im;return 0===a?new o(t/s,n/s):Math.abs(s)<Math.abs(a)?new o((t*(i=s/a)+n)/(r=s*i+a),(n*i-t)/r):new o((t+n*(i=a/s))/(r=a*i+s),(n-t*i)/r)},pow:function(t,n){var e=new o(t,n);if(t=this.re,n=this.im,e.isZero())return o.ONE;if(0===e.im){if(0===n&&t>0)return new o(Math.pow(t,e.re),0);if(0===t)switch((e.re%4+4)%4){case 0:return new o(Math.pow(n,e.re),0);case 1:return new o(0,Math.pow(n,e.re));case 2:return new o(-Math.pow(n,e.re),0);case 3:return new o(0,-Math.pow(n,e.re))}}if(0===t&&0===n&&e.re>0&&e.im>=0)return o.ZERO;var r=Math.atan2(n,t),i=s(t,n);return t=Math.exp(e.re*i-e.im*r),n=e.im*i+e.re*r,new o(t*Math.cos(n),t*Math.sin(n))},sqrt:function(){var t,n,e=this.re,r=this.im,i=this.abs();if(e>=0){if(0===r)return new o(Math.sqrt(e),0);t=.5*Math.sqrt(2*(i+e))}else t=Math.abs(r)/Math.sqrt(2*(i-e));return n=e<=0?.5*Math.sqrt(2*(i-e)):Math.abs(r)/Math.sqrt(2*(i+e)),new o(t,r<0?-n:n)},exp:function(){var t=Math.exp(this.re);return new o(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){var t=this.re,n=this.im;return new o(Math.expm1(t)*Math.cos(n)+function(t){var n=Math.PI/4;if(-n>t||t>n)return Math.cos(t)-1;var e=t*t;return e*(e*(e*(e*(e*(e*(e*(e/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(n),Math.exp(t)*Math.sin(n))},log:function(){var t=this.re,n=this.im;return new o(s(t,n),Math.atan2(n,t))},abs:function(){return t=this.re,n=this.im,e=Math.abs(t),r=Math.abs(n),e<3e3&&r<3e3?Math.sqrt(e*e+r*r):(e<r?(e=r,r=t/n):r=n/t,e*Math.sqrt(1+r*r));var t,n,e,r},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var t=this.re,n=this.im;return new o(Math.sin(t)*e(n),Math.cos(t)*r(n))},cos:function(){var t=this.re,n=this.im;return new o(Math.cos(t)*e(n),-Math.sin(t)*r(n))},tan:function(){var t=2*this.re,n=2*this.im,i=Math.cos(t)+e(n);return new o(Math.sin(t)/i,r(n)/i)},cot:function(){var t=2*this.re,n=2*this.im,i=Math.cos(t)-e(n);return new o(-Math.sin(t)/i,r(n)/i)},sec:function(){var t=this.re,n=this.im,i=.5*e(2*n)+.5*Math.cos(2*t);return new o(Math.cos(t)*e(n)/i,Math.sin(t)*r(n)/i)},csc:function(){var t=this.re,n=this.im,i=.5*e(2*n)-.5*Math.cos(2*t);return new o(Math.sin(t)*e(n)/i,-Math.cos(t)*r(n)/i)},asin:function(){var t=this.re,n=this.im,e=new o(n*n-t*t+1,-2*t*n).sqrt(),r=new o(e.re-n,e.im+t).log();return new o(r.im,-r.re)},acos:function(){var t=this.re,n=this.im,e=new o(n*n-t*t+1,-2*t*n).sqrt(),r=new o(e.re-n,e.im+t).log();return new o(Math.PI/2-r.im,r.re)},atan:function(){var t=this.re,n=this.im;if(0===t){if(1===n)return new o(0,Infinity);if(-1===n)return new o(0,-Infinity)}var e=t*t+(1-n)*(1-n),r=new o((1-n*n-t*t)/e,-2*t/e).log();return new o(-.5*r.im,.5*r.re)},acot:function(){var t=this.re,n=this.im;if(0===n)return new o(Math.atan2(1,t),0);var e=t*t+n*n;return 0!==e?new o(t/e,-n/e).atan():new o(0!==t?t/0:0,0!==n?-n/0:0).atan()},asec:function(){var t=this.re,n=this.im;if(0===t&&0===n)return new o(0,Infinity);var e=t*t+n*n;return 0!==e?new o(t/e,-n/e).acos():new o(0!==t?t/0:0,0!==n?-n/0:0).acos()},acsc:function(){var t=this.re,n=this.im;if(0===t&&0===n)return new o(Math.PI/2,Infinity);var e=t*t+n*n;return 0!==e?new o(t/e,-n/e).asin():new o(0!==t?t/0:0,0!==n?-n/0:0).asin()},sinh:function(){var t=this.re,n=this.im;return new o(r(t)*Math.cos(n),e(t)*Math.sin(n))},cosh:function(){var t=this.re,n=this.im;return new o(e(t)*Math.cos(n),r(t)*Math.sin(n))},tanh:function(){var t=2*this.re,n=2*this.im,i=e(t)+Math.cos(n);return new o(r(t)/i,Math.sin(n)/i)},coth:function(){var t=2*this.re,n=2*this.im,i=e(t)-Math.cos(n);return new o(r(t)/i,-Math.sin(n)/i)},csch:function(){var t=this.re,n=this.im,i=Math.cos(2*n)-e(2*t);return new o(-2*r(t)*Math.cos(n)/i,2*e(t)*Math.sin(n)/i)},sech:function(){var t=this.re,n=this.im,i=Math.cos(2*n)+e(2*t);return new o(2*e(t)*Math.cos(n)/i,-2*r(t)*Math.sin(n)/i)},asinh:function(){var t=this.im;this.im=-this.re,this.re=t;var n=this.asin();return this.re=-this.im,this.im=t,t=n.re,n.re=-n.im,n.im=t,n},acosh:function(){var t=this.acos();if(t.im<=0){var n=t.re;t.re=-t.im,t.im=n}else n=t.im,t.im=-t.re,t.re=n;return t},atanh:function(){var t=this.re,n=this.im,e=t>1&&0===n,r=1-t,i=1+t,a=r*r+n*n,u=0!==a?new o((i*r-n*n)/a,(n*r+i*n)/a):new o(-1!==t?t/0:0,0!==n?n/0:0),c=u.re;return u.re=s(u.re,u.im)/2,u.im=Math.atan2(u.im,c)/2,e&&(u.im=-u.im),u},acoth:function(){var t=this.re,n=this.im;if(0===t&&0===n)return new o(0,Math.PI/2);var e=t*t+n*n;return 0!==e?new o(t/e,-n/e).atanh():new o(0!==t?t/0:0,0!==n?-n/0:0).atanh()},acsch:function(){var t=this.re,n=this.im;if(0===n)return new o(0!==t?Math.log(t+Math.sqrt(t*t+1)):Infinity,0);var e=t*t+n*n;return 0!==e?new o(t/e,-n/e).asinh():new o(0!==t?t/0:0,0!==n?-n/0:0).asinh()},asech:function(){var t=this.re,n=this.im;if(this.isZero())return o.INFINITY;var e=t*t+n*n;return 0!==e?new o(t/e,-n/e).acosh():new o(0!==t?t/0:0,0!==n?-n/0:0).acosh()},inverse:function(){if(this.isZero())return o.INFINITY;if(this.isInfinite())return o.ZERO;var t=this.re,n=this.im,e=t*t+n*n;return new o(t/e,-n/e)},conjugate:function(){return new o(this.re,-this.im)},neg:function(){return new o(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new o(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new o(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new o(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,n){var e=new o(t,n);return Math.abs(e.re-this.re)<=o.EPSILON&&Math.abs(e.im-this.im)<=o.EPSILON},clone:function(){return new o(this.re,this.im)},toString:function(){var t=this.re,n=this.im,e="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<o.EPSILON&&(t=0),Math.abs(n)<o.EPSILON&&(n=0),0===n?e+t:(0!==t?(e+=t,e+=" ",n<0?(n=-n,e+="-"):e+="+",e+=" "):n<0&&(n=-n,e+="-"),1!==n&&(e+=n),e+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},o.ZERO=new o(0,0),o.ONE=new o(1,0),o.I=new o(0,1),o.PI=new o(Math.PI,0),o.E=new o(Math.E,0),o.INFINITY=new o(Infinity,Infinity),o.NAN=new o(NaN,NaN),o.EPSILON=1e-15,Object.defineProperty(o,"__esModule",{value:!0}),o.default=o,o.Complex=o,t.exports=o}()}),i=/*@__PURE__*/t(r);function s(t){const n="bigint"==typeof t?Number(t):t;return new i(n)}function o(t,n=10n){const e="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,Number(n)),r=BigInt(n);let i,s=1n;if("string"==typeof t){"+"===t[0]?t=t.slice(1):"-"===t[0]&&(s=-1n,t=t.slice(1)),i=t.toLowerCase().split("").map(t=>e.indexOf(t));const r=i.indexOf(-1);if(-1!==r)throw Error(`다음 글자를 ${n}진법 숫자로 해석할 수 없습니다: '${t[r]}'`)}else i=t;let o=0n;for(let t=0;t<i.length;t++)o*=r,o+=BigInt(i[t]);return o*s}function a(t){return"bigint"!=typeof t&&(t instanceof i?a(t.re)||a(t.im):!(isFinite(t)||isNaN(t)))}function u(t){return"bigint"!=typeof t&&(t instanceof i?t.isNaN():isNaN(t))}function c(t){return"bigint"==typeof t||Number.isInteger(t)}function h(t,n){return n instanceof i?t.re===n.re&&t.im===n.im:0===t.im&&("bigint"==typeof n?f(n,t.re):n===t.re)}function f(t,n){return c(n)&&t===BigInt(n)}function l(t,n){return t instanceof i?h(t,n):n instanceof i?h(n,t):"bigint"==typeof t?f(t,n):"bigint"==typeof n?f(n,t):t===n}function m(t,n,e=1e-9,r=1e-16){if(e<0||r<0)throw RangeError("Tolerances must be non-negative.");if(l(t,n))return!0;if(a(t)||a(n))return!1;const o="bigint"==typeof t?Number(t):t,u="bigint"==typeof n?Number(n):n,c=w(function(t,n){return"bigint"==typeof t&&"bigint"==typeof n?t-n:t instanceof i||n instanceof i?s(t).sub(s(n)):Number(t)-Number(n)}(o,u));return c<=e*w(u)||c<=e*w(o)||c<=r}function w(t){return"bigint"==typeof t?t>=0n?t:-t:t instanceof i?t.abs():Math.abs(t)}function v(t,n){return"bigint"==typeof t&&"bigint"==typeof n?t+n:t instanceof i||n instanceof i?function(t,n){return new i(t.re+n.re,t.im+n.im)}(s(t),s(n)):Number(t)+Number(n)}function p(t,n){return"bigint"==typeof t&&"bigint"==typeof n?t*n:t instanceof i||n instanceof i?function(t,n){return new i(t.re*n.re-t.im*n.im,t.re*n.im+t.im*n.re)}(s(t),s(n)):Number(t)*Number(n)}Math.trunc=Math.trunc||function(t){return isNaN(t)?NaN:t>0?Math.floor(t):Math.ceil(t)};class d{constructor(t,n,e,r,i){this.filename=void 0,this.line_no=void 0,this.start_col=void 0,this.end_col=void 0,this.line=void 0,this.str=void 0,this.filename=t,this.line_no=n,this.start_col=e,this.end_col=r,this.line=i}toString(){return null==this.str&&(this.str=this.line+"\n"+" ".repeat(e.length(this.line.slice(0,this.start_col)))+"^".repeat(e.length(this.line.slice(this.start_col,this.end_col)))),this.str}}class g{constructor(t,n){this.metadata=void 0,this.value=void 0,this.metadata=t,this.value=n}}class y{constructor(t,n){this.metadata=void 0,this.rel=void 0,this.metadata=t,this.rel=n}}class b{constructor(t,n,e){this.metadata=void 0,this.relA=void 0,this.relF=void 0,this.metadata=t,this.relA=n,this.relF=e}}class N{constructor(t,n){this.metadata=void 0,this.body=void 0,this.metadata=t,this.body=n}}class M{constructor(t,n,e){this.metadata=void 0,this.fun=void 0,this.argv=void 0,this.metadata=t,this.fun=n,this.argv=e}}class I{constructor(t,n,e){this.funs=void 0,this.args=void 0,this.utils=void 0,this.funs=t,this.args=n,this.utils=e}}class x extends Error{constructor(t){let n="";for(const e of t.metadatas)n+=`${e.filename} ${e.line_no+1}번줄 `,n+=`${e.start_col+1}~${e.end_col+1}번째 글자:\n`,n+=e.toString()+"\n";super(n+"\n"+t.message),this.err=void 0,this.err=t}}class E{asKey(t){return this.format(t)}}function $(t){return isFinite(t)?t.toString():isNaN(t)?"nan":t>0?"inf":"-inf"}class A extends E{constructor(t){super(),this.value=void 0,this.value=t}format(t){return this.value.toString()}}A.typeName="정수";class F extends E{constructor(t){super(),this.value=void 0,this.value=t}format(t){var n;return $(this.value)+(n=this.value,isFinite(n)&&m(n,Math.floor(n))?".0":"")}asKey(t){return $(this.value)}}F.typeName="실수";class B extends E{constructor(t){super(),this.value=void 0,this.value=t}format(t){const n=this.value.re,e=this.value.im,r=$(n)+(e<0?"":"+");return(0===n?"":r)+(1==e?"":-1==e?"-":$(e))+"i"}asKey(t){return this.value.im?this.format(t):$(this.value.re)}}B.typeName="복소수";class j extends E{constructor(t){super(),this.value=void 0,this.value=t}format(t){return this.value?"True":"False"}}j.typeName="논릿값";class O extends E{constructor(t){super(),this.value=void 0,this.value=t}format(t){return`[${this.value.map(n=>t(n).format(t)).join(", ")}]`}asKey(t){return`[${this.value.map(n=>t(n).asKey(t)).join(", ")}]`}}O.typeName="목록";class _ extends E{constructor(t){super(),this.str=void 0,this.value=void 0,this.str=t,this.value=Array.from(t)}format(t){return"'"+this.str+"'"}}_.typeName="문자열";class C extends E{constructor(t){super(),this.value=void 0,this.str=void 0,this.value=t}formatByte(t){return"\\x"+("0"+t.toString(16).toUpperCase()).slice(-2)}format(t){if(!this.str){const t=Array.from(new Uint8Array(this.value)).map(this.formatByte);this.str="b'"+t.join("")+"'"}return this.str}}C.typeName="바이트열";class P extends E{constructor(t){super(),this.value=void 0,this._keys=void 0,this._values=void 0,this.value=t}keys(){return this._keys||(this._keys=Object.keys(this.value).sort()),this._keys}values(){return this._values||(this._values=this.keys().map(t=>this.value[t])),this._values}format(t){const n=this.values().map(n=>t(n).format(t));return"{"+this.keys().map((t,e)=>t+": "+n[e]).join(", ")+"}"}asKey(t){const n=this.values().map(n=>t(n).asKey(t));return"{"+this.keys().map((t,e)=>t+": "+n[e]).join(", ")+"}"}}P.typeName="사전";class S extends E{constructor(t,n,e){super(),this.inst=void 0,this.argv=void 0,this.continuation=void 0,this.inst=t,this.argv=n,this.continuation=e}format(t){const n=this.argv.map(n=>t(n).format(t)).join(", ");return`<드나듦 ${this.inst}: [${n}]>`}asKey(t){const n=this.argv.map(n=>t(n).asKey(t)).join(", ");return`<드나듦 ${this.inst}: [${n}]>`}}S.typeName="드나듦";class k extends E{constructor(){super()}format(t){return"Nil"}}k.typeName="빈값";let U=0;class L extends E{constructor(t=""){super(),this.id=void 0,this.str=void 0,this.id=U++,this.str="<"+t+"함수>"}format(t){return this.str}asKey(t){return this.str.replace(">"," #"+this.id+">")}}L.typeName="함수";class T extends L{constructor(t,n){super(`깊이 ${n.args.length}에서 생성된 `),this.body=void 0,this.env=void 0,this.body=t,this.env=n}execute(t,n){const e=this.env.args.concat([n]),r=new I(this.env.funs,e,this.env.utils);return new q(this.body,r,null)}}class K extends L{constructor(t,n){super(),this.module=void 0,this.module=t,this.str="<기본 제공 모듈 "+n+">"}execute(t,n){return this.module(t,n)}}class Z extends E{constructor(t,n,e){super(),this.metadatas=void 0,this.message=void 0,this.value=void 0,this.metadatas=t,this.message=n,this.value=e}format(t){return`<예외: [${this.value.map(n=>n.format(t)).join(", ")}]>`}asKey(t){return`<예외: [${this.value.map(n=>n.asKey(t)).join(", ")}]>`}}Z.typeName="예외";class q{constructor(t,n,e){this.expr=void 0,this.env=void 0,this.cache=void 0,this.expr=t,this.env=n,this.cache=e}}const V=[A,F],D=[...V,B],Y=[O,_,C],R=[L,j,P,B,Z,...Y],z="ㄱ|ㄱ|ㄴ|ㄷ|ㄷ|ㄹ|ㅁ|ㅂ|ㅂ|ㅅ|ㅅ| ㅇ|ㅈ|ㅈ|ㅈ|ㄱ|ㄷ|ㅂ| ㅎ|ㄴㄱ|ㄴ|ㄴㄷ|ㄴㅂ|ㄷㄱ|ㄹㄴ|ㄹ|ㄹ ㅎ|ㄹ|ㅁㅂ|ㅁ|ㅂㄱ|ㅂㄴ|ㅂㄷ|ㅂㅅ|ㅂㅅㄱ|ㅂㅅㄷ|ㅂㅅㅂ|ㅂㅅ|ㅂㅅㅈ|ㅂㅈ|ㅂㅈ|ㅂㄷ|ㅂㅂ|ㅂ|ㅂ|ㅅㄱ|ㅅㄴ|ㅅㄷ|ㅅㄹ|ㅅㅁ|ㅅㅂ|ㅅㅂㄱ|ㅅㅅ|ㅅ ㅇ|ㅅㅈ|ㅅㅈ|ㅅㄱ|ㅅㄷ|ㅅㅂ|ㅅ ㅎ|ㅅ|ㅅ|ㅅ|ㅅ|ㅅ| ㅇㄱ| ㅇㄷ| ㅇㅁ| ㅇㅂ| ㅇㅅ| ㅇㅅ| ㅇ| ㅇㅈ| ㅇㅈ| ㅇㄷ| ㅇㅂ| ㅇ|ㅈ ㅇ|ㅈ|ㅈ|ㅈ|ㅈ|ㅈㄱ|ㅈ ㅎ|ㅈ|ㅈ|ㅂㅂ|ㅂ| ㅎ| ㅎ|ㄱㄷ|ㄴㅅ|ㄴㅈ|ㄴ ㅎ|ㄷㄹ".split("|"),W="ㄱ|ㄱ|ㄱㅅ|ㄴ|ㄴㅈ|ㄴ ㅎ|ㄷ|ㄷ|ㄹ|ㄹㄱ|ㄹㅁ|ㄹㅂ|ㄹㅅ|ㄹㄷ|ㄹㅂ|ㄹ ㅎ|ㅁ|ㅂ|ㅂ|ㅂㅅ|ㅅ|ㅅ| ㅇ|ㅈ|ㅈ|ㅈ|ㄱ|ㄷ|ㅂ| ㅎ".split("|"),H="ㄴ|ㄴㄷ|ㄴㅅ|ㄴㅅ|ㄹㄱㅅ|ㄹㄷ|ㄹㅂㅅ|ㅁㅅ|ㅁ|ㅂㄱ|ㅂㄷ|ㅂㅅㄱ|ㅂㅅㄷ|ㅂㅈ|ㅂㄷ|ㅂ|ㅂ|ㅅㄱ|ㅅㄴ| ㅇ| ㅇ| ㅇㅅ| ㅇㅅ|ㅂ| ㅎ| ㅎ".split("|"),G="ㄷㅁ|ㄷㅂ|ㄷㅅ|ㄷㅈ|ㄹㄱ|ㄹㄱ|ㄹㄷ|ㄹㄷ|ㄹㅁ|ㄹㅂ|ㄹㅂ|ㄹㅂ|ㄹㅅ|ㄹㅈ|ㄹㄱ|ㅁㄱ|ㅁㄷ|ㅁㅅ|ㅂㅅㄷ|ㅂㄱ|ㅂ ㅎ|ㅅㅂ| ㅇㄹ| ㅇ ㅎ|ㅈ ㅎ|ㄷ|ㅂ ㅎ| ㅎㅅ| ㅎ".split("|");function J(t){if(1!==t.length)throw Error("[normalizeChar] Length of string should be 1, not "+t.length+": "+t);function n(n,e,r=1){let i=t.charCodeAt(0)-e.charCodeAt(0);return i=Math.floor(i/r),i>=0&&i<n.length?n[i]:""}return t>="ᄀ"&&t<="ᇿ"?n(z,"ᄀ"):t>="〮"&&t<="〯"?"":t>="ㄱ"&&t<="ㅤ"?n(W,"ㄱ"):t>="ㅥ"&&t<="ㆎ"?n(H,"ㅥ"):t>="ꥠ"&&t<="ꥼ"?n(G,"ꥠ"):t>="가"&&t<="힯"?n(z,"가",588):t>="ힰ"&&t<="ퟆ"||t>="ퟋ"&&t<="ퟻ"?"":t>="ﾠ"&&t<="ﾾ"?n(W,"ﾡ"):"ￂￃￄￅￆￇￊￋￌￍￎￏￒￓￔￕￖￗￚￛￜ".indexOf(t)>=0?"":" "}function Q(t){return t.split("").map(J).join("").split(/( )/)}function X(t){const n=t.split("").map(function(t){return"ㄱㄴㄷㄹㅁㅂㅅㅈ".indexOf(t)});if(-1!==n.indexOf(-1))throw SyntaxError("Argument "+t+" has an unsupported character");let e=BigInt("0o"+n.reverse().join(""));return t.length%2==0&&(e=-e),e}function tt(t){const n=t<0;let e=(t=t>=0?t:-t).toString(8).split("").reverse().map(t=>"ㄱㄴㄷㄹㅁㅂㅅㅈ"[+t]).join("");return e.length%2==0!==n&&(e+="ㄱ"),e}function nt(t,n){const[e,r]=t;if(-1!==e.indexOf("ㅎ")){const t=e.slice(1);if(t){const e=Number(X(t));if(e<0)throw new ot(r,`함수 호출 시 ${e}개의 인수를 요구했습니다.`);const i=n.pop();if(null==i)throw new ot(r,"호출할 함수가 없습니다.");if(0===e)n.push(new M(r,i,[]));else{const t=n.splice(-e,e);if(t.length<e)throw new ot(r,`함수 호출 시 ${e}개의 인수를 요구했으나 표현식이 ${t.length}개밖에 없습니다.`);n.push(new M(r,i,t))}}else{const t=n.pop();if(null==t)throw new ot(r,"함수 몸통이 없습니다.");n.push(new N(r,t))}}else if(-1!==e.indexOf("ㅇ")){const t=e.slice(1);if(""!==t){const e=n.pop();if(null==e)throw new ot(r,"인수 참조 구문이 잘못되었습니다.");const i=Number(X(t));n.push(new b(r,e,i))}else{const t=n.pop();if(null==t)throw new ot(r,"함수 참조 구문이 잘못되었습니다.");if(!(t instanceof g))throw new ot(r,"함수 참조 시에는 정수 리터럴만 허용됩니다.");n.push(new y(r,Number(t.value)))}}else n.push(new g(r,X(e)))}function et(t,n){const e=function(t,n){const e=n.split("\n").flatMap((n,e)=>(n+"\n").split("").flatMap((r,i)=>Q(r).filter(t=>""!==t).map(r=>[r,new d(t,e,i,i+1,n)])));if(0===e.length)return[];let r=[e[0]];for(const[t,n]of e.slice(1)){const e=r.pop();if(null==e)throw Error("Internal::tokenize::EMPTY_STACK");const[o,a]=e;" "===o&&" "===t?r.push([o,a]):" "!==o&&" "!==t?r.push([o+t,(i=a,s=n,new d(i.filename,i.line_no,i.start_col,s.end_col,i.line))]):(r.push([o,a]),r.push([t,n]))}var i,s;return r.filter(([t,n])=>" "!==t)}(t,n),r=[];for(const t of e)nt(t,r);return r}class rt extends x{constructor(t,n,e){const r=[X("ㅂ"),...e].map(t=>new A(t));super(new Z([t],n,r))}}class it extends rt{constructor(t,n){super(t,n,[X("ㅈㅈ")])}}class st extends rt{constructor(t,n){super(t,n,[X("ㅅㅅ")])}}class ot extends rt{constructor(t,n){super(t,n,[X("ㅁㅂ")])}}class at extends rt{constructor(t,n){super(t,n,[X("ㄱ")])}}class ut extends rt{constructor(t,n){super(t,n,[X("ㅈㅁ")])}}class ct extends rt{constructor(t,n){super(t,n,[X("ㄴㄴ")])}}class ht extends rt{constructor(t,n){super(t,n,[X("ㅁㅈ")])}}class ft extends rt{constructor(t,n){super(t,n,[X("ㅂ")])}}class lt extends rt{constructor(t,n){super(t,n,[X("ㅂㄱ")])}}function mt(t){return t instanceof q&&t.expr instanceof g}function wt(t){return t.value}function vt(t){const n=t.map(t=>t.byteLength).reduce((t,n)=>t+n,0),e=new ArrayBuffer(n),r=new Uint8Array(e);return t.reduce(function(t,n){return r.set(new Uint8Array(n),t),t+n.byteLength},0),e}function pt(t,n){const e=n(t);if(e instanceof O)return new O(e.value.map(t=>pt(t,n)));if(e instanceof P){const t=e.value,r={};return Object.keys(t).forEach(function(e){r[e]=pt(t[e],n)}),new P(r)}return e instanceof Z?new Z(e.metadatas,e.message,e.value.map(t=>pt(t,n))):e}function dt(t){return 0===t.length||t.every(function(n){return n===t[0]})}function gt(t,n){return t.every(function(t){return n.some(function(n){return t instanceof n})})}function yt(t,n=", "){return t.join(n)}function bt(t,n,e){if(gt(n,e))return n;const r=e.map(t=>t.typeName),i=n.map(t=>t.constructor.typeName);throw new at(t,`인수를 ${yt(r)} 중에서 주어야 하는데 ${function(t,n,e){if(0===t.length)return t+"을";const r=t.charCodeAt(t.length-1);return r<44032||r>55203?t+"을":t+((r-44032)%28!=0?"을":"를")}(yt(i))} 주었습니다.`)}function Nt(t,n,e){const r=Array.isArray(e)?e:[e];if(-1===r.indexOf(n.length))throw new ut(t,`인수를 ${yt(r.map(t=>t.toString()),"개나 ")}개를 주어야 하는데 ${n.length}개의 인수를 주었습니다.`)}function Mt(t,n,e){if(!(n.length>=e))throw new ut(t,`인수를 ${e}개 이상 주어야 하는데${n.length}개 주었습니다.`)}function It(t,n,e){if(!(n.length<=e))throw new ut(t,`인수를 ${e}개 이하 주어야 하는데${n.length}개 주었습니다.`)}function xt(t,n,e,r){return void 0===r&&(r=[]),It(t,n,e),Mt(t,n,e-r.length),n.length<e&&(n=n.concat(r.slice(-(e-n.length)))),n}function Et(t){return"bigint"==typeof t?new A(t):t instanceof i?new B(t):new F(t)}function $t(t,n){const e=xt(t,n,2,[new A(10n)]),[r]=bt(t,[e[0]],[_]),[i]=bt(t,[e[1]],[A]);return[r.str,Number(i.value)]}class At extends L{constructor(t){super("연결된 "),this.funs=void 0,this.funs=t}execute(t,n){return this.funs.reduce((n,e)=>[e(t,n)],n)[0]}}class Ft extends L{constructor(t,n){super("모아 받는 "),this.fn=void 0,this.strict=void 0,this.fn=t,this.strict=n}execute(t,n){Nt(t,n,1);const e=this.strict(n[0]),[r]=bt(t,[e],[O,Z]);return this.fn(t,r.value)}}class Bt extends L{constructor(t){super("펼쳐 받는 "),this.fn=void 0,this.fn=t}execute(t,n){return this.fn(t,[new O(n)])}}const jt={ㄹ:"r",ㅈㄹ:"w",ㅈㄱ:"a",ㄹㅈㄹ:"r+",ㅈㄹㄹ:"w+",ㅈㄱㄹ:"a+"};class Ot extends L{constructor(t,n){super("파일 접근 "),this.file=void 0,this.strict=void 0,this.file=t,this.strict=n}execute(t,n){Mt(t,n,1);const[e]=bt(t,n.slice(-1).map(this.strict),[A]),r=tt(e.value);if("ㄷ"===r)return this.close(t,n);if("ㄹ"===r)return this.read(t,n);if("ㅈㄹ"===r)return this.write(t,n);if("ㅈ"===r)return this.seekOrTell(t,n);if("ㄱ"===r)return this.truncate(t,n);throw new ut(t,`${r}은 파일 객체가 인식하지 못하는 명령입니다.`)}close(t,n){var e=this;return Nt(t,n,1),new S("FileV::close",[this],async function(n,r){try{return e.file.close(),new k}catch(n){throw new it(t,`파일 닫기에 실패하였습니다: ${n}`)}})}read(t,n){var e=this;Nt(t,n,2);const[r]=bt(t,[this.strict(n[0])],[A]);return new S("FileV::read",[this,r],async function(n,i){try{const t=await e.file.read(Number(r.value));return new C(t)}catch(n){throw new it(t,`파일 읽기에 실패하였습니다: ${n}`)}})}write(t,n){var e=this;Nt(t,n,2);const[r]=bt(t,[this.strict(n[0])],[C]);return new S("FileV::write",[this,r],async function(n,i){try{const t=e.file.write(r.value);return new A(BigInt(t))}catch(n){throw new it(t,`파일 쓰기에 실패하였습니다: ${n}`)}})}seekOrTell(t,n){var e=this;It(t,n,3);const r=n.map(this.strict);if(1===n.length)return new S("FileV::seekOrTell",[this],async function(n,r){try{return new A(BigInt(e.file.tell()))}catch(n){throw new it(t,`파일의 어디를 읽고 있는지 알아내는 데 실패하였습니다: ${n}`)}});let i,s="SEEK_SET";if(2===n.length)[i]=bt(t,[r[0]],[A]);else{[i]=bt(t,[r[1]],[A]);let[n]=bt(t,[r[0]],[A]);switch(tt(n.value)){case"ㅅㅈㅂㄷ":s="SEEK_SET";break;case"ㅈㄱㅂㄷ":s="SEEK_CUR";break;default:throw new ut(t,`파일 객체의 ㅈ 명령에 주는 위치 인수로 ${n.value}은 적절하지 않습니다.`)}}return new S("FileV::seekOrTell",[this,...r.slice(0,-1)],async function(n,r){try{const t=e.file.seek(Number(i.value),s);return new A(BigInt(t))}catch(n){throw new it(t,`파일의 읽는 위치를 수정하는 데 실패하였습니다: ${n}`)}})}truncate(t,n){var e=this;It(t,n,2);const r=bt(t,n.map(this.strict),[A]),i=r.length>1?Number(r[0].value):void 0;return new S("FileV::truncate",[this,...r.slice(0,-1)],async function(n,r){try{const t=e.file.truncate(i);return new A(BigInt(t))}catch(n){throw new it(t,`파일 크기를 재조정하는 데 실패하였습니다: ${n}`)}})}}const _t=["utf","unsigned","signed","float"];class Ct extends L{constructor(t,n,e,r,i){super(),this.strict=void 0,this.scheme=void 0,this.numBytes=void 0,this.bigEndian=void 0,this.endianness=void 0,this.codec=void 0,this.strict=t;const[s,o]=bt(n,[e,r],[A]);if(this.scheme=_t[Number(s.value)],this.numBytes=Number(o.value),this.endianness="",i){const[t]=bt(n,[i],[j]);this.bigEndian=t.value,this.endianness=this.bigEndian?"big":"little"}this.codec=this.getCodec(),this.str="<Codec(scheme="+this.scheme+", num_bytes="+this.numBytes+", big_endian="+this.bigEndian+")>"}execute(t,n){const e=n.map(this.strict);try{return this.codec(t,e)}catch(n){if(n instanceof x)throw n;throw new ut(t,`요청된 변환을 수행하지 못했습니다. 변환기: ${this.str}, 인수: ${e}`)}}getCodec(){switch(this.scheme){case"utf":return this.unicodeCodec;case"signed":case"unsigned":return this.integerCodec;case"float":return this.floatingPointCodec}}unicodeCodec(t,n){Nt(t,n,1);const[e]=bt(t,n.map(this.strict),[_,C]);if(e instanceof _){if(1===this.numBytes){const t=new TextEncoder;return new C(t.encode(e.str).buffer)}let n;if(2===this.numBytes)n=e.str.split("").map(t=>t.charCodeAt(0));else{if(4!==this.numBytes)throw new ut(t,`UTF-${8*this.numBytes} 형식은 존재하지 않습니다.`);n=e.value.map(t=>t.codePointAt(0)).filter(t=>null!=t)}""===this.endianness&&n.unshift(65279);const r=new ArrayBuffer(n.length*this.numBytes);return function(t,n,e,r){const i={1:t.setUint8.bind(t),2:t.setUint16.bind(t),4:t.setUint32.bind(t)}[e];if(null==i)throw Error();for(let t=0;t<n.length;t++)i(t*e,n[t],!r)}(new DataView(r),n,this.numBytes,this.bigEndian),new C(r)}{var r;const t=e.value;if(1===this.numBytes){const n=new TextDecoder;return new _(n.decode(new Uint8Array(t)))}let n=new DataView(t),i=null!=(r=this.bigEndian)?r:function(){const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!1),256===new Int16Array(t)[0]}();if(""===this.endianness){const e=(this.numBytes>2?n.getUint32:n.getUint16).bind(n),r=65279===e(0);(r||65279===e(0,!0))&&(i=r,n=new DataView(t,this.numBytes))}const s=function(t,n,e){const r={1:t.getUint8.bind(t),2:t.getUint16.bind(t),4:t.getUint32.bind(t)}[n];if(null==r)throw Error();var i=[];for(let s=0;s<t.byteLength;s+=n)i.push(r(s,!e));return i}(n,this.numBytes,i);return new _(String.fromCodePoint(...s))}}integerCodec(t,n){Nt(t,n,1);const e="signed"===this.scheme,[r]=bt(t,n.map(this.strict),[A,C]);if(r instanceof A){let t=r.value;const n=t<0;if(n&&!e)throw Error("음수는 부호 없는 정수 형식으로 변환할 수 없습니다.");if(!function(t,n,e){const r=2n<<8n*n;return e?-r/2n<=t&&t<r/2n:0n<=t&&t<r}(t,BigInt(this.numBytes),e))throw Error(`${this.numBytes}바이트로 표현할 수 없는 정수를 받았습니다.`);n&&(t=~t);const i=function(t,n=10n){if(t<0n)throw Error("Cannot convert a negative integer into array form.");const e=BigInt(n),r=[];for(;t>0n;)r.push(t%e),t/=e;return r.reverse()}(t,256n).map(Number),s=new ArrayBuffer(this.numBytes),o=new Uint8Array(s);return o.set(i,this.numBytes-i.length),n&&o.forEach((t,n)=>o[n]=~t),this.bigEndian||o.reverse(),new C(s)}{const t=r.value.slice(0),n=new Uint8Array(t);this.bigEndian||n.reverse();const i=e&&128&n[0];i&&n.forEach((t,e)=>n[e]=~t);let s=o(Array.from(n),256);return i&&(s=~s),new A(s)}}floatingPointCodec(t,n){throw EvalError("Not yet implemented")}}function Pt(t){return t>0?Math.ceil(t):Math.floor(t)}function St(t){let n=Math.round(t);return t%1!=.5&&t%1!=-.5||n%2!=1&&n%2!=-1||n--,n}function kt(t){return n=>new t(n)}const Ut=[function(t,n,e){function r(t,e){return function(r,i){Nt(r,i,e);const s=bt(r,i.map(n),[A]);return new A(t(...s.map(wt)))}}return{ㅂㄷ:{ㄱ:r((t,n)=>t&n,2),ㄷ:r((t,n)=>t|n,2),ㅁ:r(t=>~t,1),ㅂ:r((t,n)=>t^n,2),ㅈ:r((t,n)=>t<<n,2)}}},function(t,n,e){return{ㅂ:function(t,e){Nt(t,e,[2,3]);const r=e.map(n);return new Ct(n,t,r[0],r[1],r.length>2?r[2]:void 0)}}},function(t,n,e){function r(t,e,r,i){return function(s,o){Nt(s,o,e);const a=bt(s,o.map(n),i).map(t=>t.value);return r(t(...a))}}function i(t){return function(e,r){Nt(e,r,1);const i=bt(e,[n(r[0])],D);if(gt(i,V)){const n=Math[t](Number(i[0].value));if(!isNaN(n))return new F(n)}return new B(s(i[0].value)[t]())}}function o(t){return function(e,r){Nt(e,r,1);const[i]=bt(e,[n(r[0])],V);if(i instanceof A)return i;const s=BigInt(t(i.value));return new A(s)}}const c=i("atan"),h=r((t,n)=>Math.atan2(Number(t),Number(n)),2,kt(F),V);return{ㅅ:{ㅂ:Math.PI,ㅈ:Math.E,ㅁ:Infinity,ㄴ:NaN,ㄱ:r((t,n)=>m(t,n),2,kt(j),D),ㄴㄴ:r(u,1,kt(j),D),ㅁㄴ:r(a,1,kt(j),D),ㅈㄷ:r(w,1,Et,D),ㄹㄱ:i("log"),ㅅㄴ:i("sin"),ㄴㅅ:i("asin"),ㄱㅅ:i("cos"),ㅅㄱ:i("acos"),ㄷㄴ:i("tan"),ㄴㄷ:function(t,n){return 2===n.length?h(t,n):c(t,n)},ㅂㄹ:{ㄱ:o(Math.trunc),ㄴ:o(Math.floor),ㄷ:o(St),ㄹ:o(Math.ceil),ㅁ:o(Pt)}}}}];var Lt={},Tt=new P({});function Kt(t,n){t=n.normalizePath(t);var e=Lt[t];if(e)return e;const r=et(t,n.load(t));if(1!==r.length)throw new ut(r[0].metadata,`모듈에는 표현식이 하나만 있어야 하는데 ${r.length}개가 있습니다.`);const i=new I([],[],n);return e=new q(r[0],i,null),Lt[t]=e,e}function Zt(t,n,e){const r=`정수 리터럴열 ${n.map(tt).join(" ")}에 맞는 모듈을 찾지 못했습니다.`;if(5n===n[0]){var i=Tt;for(const e of n.slice(1)){if(!(i instanceof P))throw new ht(t,r);i=i.value[e.toString()]}return i}const s=qt(t,n,".",e);if(!s)throw new ht(t,r);return Kt(s,e)}function qt(t,n,e,r){if(0===n.length)return r.isFile(e)?e:null;const i=n[0],s=n.slice(1),o=r.listdir(e).map(n=>{if(!function(t,n){t=Q(t).join(" ").trim();try{return X(t)===n}catch(t){return!1}}(n,i))return null;const o=r.joinPath(e,n);return qt(t,s,o,r)}).filter(t=>t);if(o.length>1)throw new ft(t,`${e}에 정수 리터럴열 ${n}에 맞는 모듈이 ${o.length}개 있어 모호합니다.`);return o.length?o[0]:null}function Vt(t,n){return"function"==typeof t?new K(t,n.join(" ")):"number"==typeof t?new F(t):Dt(t,n)}function Dt(t,n){let e={};for(const r in t)e[X(r).toString()]=Vt(t[r],n.concat([r]));return new P(e)}function*Yt(t,n,e,r){const i=n<0?n+t.length:n,s=e<0?e+t.length:e;if(r>0){const n=Math.max(0,i),e=Math.min(s,t.length);for(let i=n;i<e;i+=r)yield t[i]}else{const n=Math.min(i,t.length-1),e=Math.max(-1,s);for(let i=n;i>e;i+=r)yield t[i]}}const Rt={};let zt=!1;const Wt=[function(t,n,e){return{ㄱ:function(t,e){if(Mt(t,e,1),gt(bt(t,[n(e[0])],[j,...D]),D))return Et(bt(t,e.map(n),D).map(t=>t.value).reduce(p));for(const r of e){const[e]=bt(t,[n(r)],[j]);if(!e.value)return new j(!1)}return new j(!0)},ㄷ:function(t,e){Mt(t,e,1);const r=bt(t,[n(e[0])],[j,P,...D,...Y]);if(gt(r,[j])){for(const r of e){const[e]=bt(t,[n(r)],[j]);if(e.value)return new j(!0)}return new j(!1)}if(gt(r,[_])){const r=bt(t,e.map(n),[_]);return new _(r.map(t=>t.str).join(""))}if(gt(r,[C])){const r=bt(t,e.map(n),[C]);return new C(vt(r.map(wt)))}if(gt(r,[O])){const r=bt(t,e.map(n),[O]);return new O(r.map(wt).reduce((t,n)=>t.concat(n)))}if(gt(r,[P])){const r=bt(t,e.map(n),[P]),i={};return r.map(wt).forEach(t=>Object.assign(i,t)),new P(i)}return Et(bt(t,e.map(n),D).map(t=>t.value).reduce(v))},ㅅ:function(t,e){Nt(t,e,[2,3]);const r=bt(t,e.map(n),D);if(3===r.length){const[n,e,i]=bt(t,r,[A]);try{return new A(function(t,n,e){if(0n===e)throw Error("0을 법으로 할 수 없습니다.");t%=e;let r=1n;for(n<0n&&(n=-n,t=function(t,n){const[e,r,i]=function(t,n){let[e,r,i,s]=[0n,1n,1n,0n];for(;0n!==t;){const o=n/t;[t,n]=[n%t,t],[i,s]=[s,i-o*s],[e,r]=[r,e-o*r]}return[n,e,i]}(t%n,n);if(1n===e)return(r+n)%n;throw Error(`법 ${n}에 대한 ${t}의 역원이 없습니다.`)}(t,e));n>0n;){if(0n===t)return 0n;n%2n===1n&&(r=r*t%e),n/=2n,t=t**2n%e}return r}(n.value,e.value,i.value))}catch(n){if(n instanceof Error)throw new st(t,n.message);throw n}}Nt(t,r,2);try{return Et(function(t,n){if("bigint"==typeof t&&"bigint"==typeof n&&n>=0)return t**n;const e="bigint"==typeof(r=n)||"number"==typeof r?r:m(r.im,0)?r.re:r;var r;if(!(e instanceof i)&&e<0&&l(t,0))throw Error("0의 역수를 구하려고 했습니다.");return t instanceof i||n instanceof i||t<0&&!c(n)?s(t).pow(s(n)):1===Number(t)?1:Math.pow(Number(t),Number(n))}(r[0].value,r[1].value))}catch(n){if(n instanceof Error)throw new ct(t,n.message);throw n}},ㄴㄴ:function(t,e){Nt(t,e,2);const r=bt(t,e.map(n),V);try{return Et(function(t,n){if(0===Number(n))throw Error("0으로 나눌 수 없습니다.");return"bigint"==typeof t&&"bigint"==typeof n?t/n:Math.trunc(Number(t)/Number(n))}(r[0].value,r[1].value))}catch(n){if(n instanceof Error)throw new ct(t,"0의 역수를 구하려고 했습니다.");throw n}},ㄴㅁ:function(t,e){Nt(t,e,2);const r=bt(t,e.map(n),V);try{return Et(function(t,n){if(0===Number(n))throw Error("0으로 나눌 수 없습니다.");return"bigint"==typeof t&&"bigint"==typeof n?t%n:Number(t)%Number(n)}(r[0].value,r[1].value))}catch(n){if(n instanceof Error)throw new ct(t,"0의 역수를 구하려고 했습니다.");throw n}}}},function(t,n,e){return{ㅅㅈ:function(t,e){const r=e.length;if(r%2==1)throw new ut(t,`ㅅㅈ 함수에는 인수를 짝수 개로 주어야 하는데 ${r}개를 주었습니다.`);const i=e.filter((t,n)=>n%2==0),s=e.filter((t,n)=>n%2==1),o=i.map(n).map(t=>t.asKey(n)),a={};for(let t=0;t<r/2;t++)a[o[t]]=s[t];return new P(a)},ㅁㄹ:function(t,n){return new O(n)},ㅁㅈ:function(t,e){if(Nt(t,e,[0,1]),0===e.length)return new _("");const[r]=bt(t,[n(e[0])],[_,...D]);return r instanceof _?r:new _(r.format(n))},ㅈㅅ:function(t,e){Nt(t,e,[1,2]);const r=bt(t,e.map(n),[_,...V]),i=[r[0]];if(gt(i,V)){if(Nt(t,r,1),i[0]instanceof A)return i[0];const n=Math.trunc(i[0].value);return new A(BigInt(n))}const[s,a]=$t(t,r);try{return new A(o(s,a))}catch(n){if(n instanceof Error)throw new ut(t,n.message);throw n}},ㅅㅅ:function(t,e){Nt(t,e,[1,2]);const r=bt(t,e.map(n),[_,...V]),i=[r[0]];if(gt(i,V))return Nt(t,r,1),new F(Number(i[0].value));const[s,a]=$t(t,r);if(10===a){const n=Number(s);if(isNaN(n))throw new ut(t,`다음 문자열을 실수값으로 변환할 수 없습니다: '${s}'`);return new F(n)}const u=s.trim().split(".");let c=u.join("");"+"===c[0]&&(c=c.slice(1));try{const t=Number(o(c,a));return new F(t/a**(u.length>1?u[1].length:0))}catch(n){throw new ut(t,`다음 문자열을 실수값으로 변환할 수 없습니다: '${s}'`)}},ㅂㅅ:function(t,e){Nt(t,e,[1,2]);const r=bt(t,e.map(n),[_,...D]);if(1===e.length){const n=r[0]instanceof _?r[0].str:r[0].value;try{return new B(s(n))}catch(e){if(e instanceof Error)throw new ut(t,`다음 문자열을 복소수값으로 변환할 수 없습니다: ${n}`);throw e}}const o=bt(t,r,D).map(t=>s(t.value));return new B(i({re:o[0].re-o[1].im,im:o[0].im+o[1].re}))},ㅂㄱ:function(t,n){return Nt(t,n,0),new k},ㄷㅂ:function(t,e){const r=e.map(n),i=`사용자 예외: ${r.map(t=>t.format(n))}`;return new Z([t],i,r)}}},function(t,n,e){return{ㄷㅈ:function(t,e){Nt(t,e,1);const[r]=bt(t,e.map(n),[Z]);throw new x(r)},ㅅㄷ:function(e,r){Nt(e,r,2);try{return pt(r[0],n)}catch(n){if(n instanceof x)return t(e,r[1])(e,[n.err]);throw n}}}},function(t,n,e){function r(n){return e=>t(n,e,!0)}return{ㄴㄱ:function(t,n){return new At(n.map(r(t)))},ㅁㅂ:function(t,e){return Nt(t,e,1),new Ft(r(t)(e[0]),n)},ㅂㅂ:function(t,n){return Nt(t,n,1),new Bt(r(t)(n[0]))}}},function(t,n,e){return{ㄹ:function(t,n){return Nt(t,n,0),new S("ㄹ",n,async function(t,n){const e=await n.input();return null==e?new k:new _(e)})},ㅈㄹ:function(t,e){Nt(t,e,1);const r=bt(t,e.map(n),[_]);return new S("ㅈㄹ",r,async function(t,n){return n.print(r[0].str),new k})},ㄱㅅ:function(t,e){Nt(t,e,1);const r=pt(e[0],n);return new S("ㄱㅅ",[r],async function(t,n){return r})},ㄱㄹ:function(e,r){Nt(e,r,[2,3]);const[i]=bt(e,[n(r[0])],[S]);return new S("ㄱㄹ",r,async function(s,o){let a;try{a=await s(i)}catch(i){if(i instanceof x){if(r.length<3)throw i;const s=t(e,r[2])(e,[i.err]),[o]=bt(e,[n(s)],[S]);return o}throw i}const u=t(e,r[1])(e,[a]),[c]=bt(e,[n(u)],[S]);return c})},ㄱㄴ:function(t,r){Nt(t,r,2);const[i]=bt(t,[n(r[0])],[A,_]),s=i instanceof A?Number(i.value):i.str,[o]=bt(t,[n(r[1])],[A]),a=tt(o.value);if(!(a in jt))throw new ut(t,`${a}은 기본 제공 함수 ㄱㄴ이 이해하는 파일 열기 방식이 아닙니다.`);const u=jt[a];return new S("ㄱㄴ",[i,o],async function(r,i){try{return new Ot(e.open(s,u),n)}catch(n){throw new it(t,`파일 열기에 실패하였습니다: ${n}`)}})}}},function(t,n,e){function r(t){if(0===t.length)return!0;if(!dt(t.map(t=>t.length)))return!1;for(var n=t[0].length,e=0;e<n;e++)if(!i(t.map(t=>t[e])).value)return!1;return!0}function i(t){const e=t.map(n);return gt(e,[L])?new j(dt(e)):gt(e,[P])?new j(function(t){if(0===t.length)return!0;const n=t.map(t=>t.keys());return!!r(n.map(t=>t.map(t=>new _(t))))&&n[0].map(n=>t.map(t=>t.value[n])).map(i).every(wt)}(e)):gt(e,[S])?dt(e.map(t=>t.inst))?new j(r(e.map(t=>t.argv))):new j(!1):gt(e,D)?new j(0===(s=e.map(t=>t.value)).length||s.slice(1).every(t=>l(t,s[0]))):gt(e,[O,Z])?new j(r(e.map(wt))):gt(e,[C])?new j(function(t){if(0===t.length)return!0;if(!dt(t.map(t=>t.byteLength)))return!1;const n=t[0].byteLength,e=t.map(t=>new Uint8Array(t));for(let t=0;t<n;t++)if(!dt(e.map(n=>n[t])))return!1;return!0}(e.map(wt))):gt(e,[_])?new j(dt(e.map(t=>t.str))):gt(e,[j])?new j(dt(e.map(wt))):gt(e,[k])?new j(!0):new j(!1);var s}return{ㄴ:function(t,n){return i(n)},ㅁ:function(t,e){Nt(t,e,1);const r=bt(t,e.map(n),[j]);return new j(!r[0].value)},ㅈ:function(t,e){Nt(t,e,2);const r=bt(t,e.map(n),V);return new j(r[0].value<r[1].value)},ㅈㅈ:function(t,n){return Nt(t,n,0),new j(!0)},ㄱㅈ:function(t,n){return Nt(t,n,0),new j(!1)}}},function(t,n,e){return Ut.forEach(function(r){const i=Dt(r(t,n,e),["ㅂ"]);Object.assign(Tt.value,i.value)}),{ㅂ:function(t,r){if(Mt(t,r,1),r.every(mt))return Zt(t,r.map(t=>t.expr.value),e);Nt(t,r,1);const[i]=bt(t,[n(r[0])],[_]);return Kt(i.str,e)}}},function(t,n,e){return{ㅈㄷ:function(t,e){Nt(t,e,1);const[r]=bt(t,e.map(n),[...Y,Z]);return new A(r instanceof C?BigInt(r.value.byteLength):BigInt(r.value.length))},ㅂㅈ:function(t,e){Nt(t,e,[2,3,4]);const r=e.map(n),[i]=bt(t,[r[0]],Y),s=bt(t,r.slice(1),[A]).map(t=>Number(t.value)),[o,a,u]=xt(t,s,3,[(c=i.value,"length"in c?c.length:c.byteLength),1]);var c;if(0===u)throw new ut(t,"0은 ㅂㅈ 함수의 네 번째 인수로 적합하지 않습니다.");if(i instanceof O){const t=Yt(i.value,o,a,u);return new O(Array.from(t))}if(i instanceof _){const t=Yt(i.value,o,a,u);return new _(Array.from(t).join(""))}const h=Yt(Array.from(new Uint8Array(i.value)),o,a,u);return new C(new Uint8Array(h).buffer)},ㅁㄷ:function(e,r){Nt(e,r,2);const[i]=bt(e,[n(r[0])],[O]),s=t(e,r[1]);return new O(i.value.map(t=>s(e,[t])))},ㅅㅂ:function(e,r){Nt(e,r,2);const[i]=bt(e,[n(r[0])],[O]),s=t(e,r[1]),o=i.value.map(t=>s(e,[t])).map(n),a=bt(e,o,[j]).map(wt);return new O(i.value.filter((t,n)=>a[n]))},ㅅㄹ:function(e,r){Nt(e,r,[2,3]);let i=null;3===r.length&&(i=r[1],r=[r[0],r[2]]);const s=n(r[0])instanceof O;function o(t){return s?t.slice().reverse():t}r=o(r);const a=t(e,r[0]),[u]=bt(e,[n(r[1])],[O]);let c=o(u.value);return null==i&&(i=c[0],c=c.slice(1)),c.reduce(function(t,n){const r=o([t,n]);return a(e,r)},i)}}},function(t,n,e){return{ㅂㄹ:function(t,e){Nt(t,e,[1,2]);const r=bt(t,e.map(n),[_,C]);if(r[0]instanceof _){const n=bt(t,r,[_]),e=n[0].str.split(n.length>1?n[1].str:"");return new O(e.map(t=>new _(t)))}const i=bt(t,r,[C]),s=String.fromCharCode(...new Uint8Array(i[0].value)),o=i.length>1?String.fromCharCode(...new Uint8Array(i[1].value)):"",a=s.split(o).map(t=>new C(new Uint8Array(t.split("").map(t=>t.charCodeAt(0))).buffer));return new O(a)},ㄱㅁ:function(t,e){Nt(t,e,[1,2]);const[r]=bt(t,[n(e[0])],[O]),i=bt(t,r.value.map(n),[_,C]);if(i[0]instanceof _){const r=bt(t,i,[_]),s=e.length>1?n(e[1]):new _(""),[o]=bt(t,[s],[_]);return new _(r.map(t=>t.str).join(o.str))}const s=bt(t,i,[C]),o=e.length>1?n(e[1]):new C(new ArrayBuffer(0)),[a]=bt(t,[o],[C]);if(0===s.length)return new C(new ArrayBuffer(0));const u=[s[0].value];for(const t of s.slice(1))u.push(a.value),u.push(t.value);return new C(vt(u))}}}];function Ht(t){if(t instanceof q){if(t.cache){if(t.cache instanceof x)throw t.cache;return t.cache}try{return t.cache=Ht(Jt(t.expr,t.env)),t.cache}catch(n){throw n instanceof x&&(t.cache=n),n}}return t}function Gt(t,n){const e=n<0?n+t.length:n;if(e<0||e>=t.length)throw Error(`길이 ${t.length}의 객체의 ${n}번째 요소를 요청했습니다.`);return t[e]}function Jt(t,n){if(t instanceof g)return new A(t.value);if(t instanceof y){const e=Gt(n.funs,-t.rel-1);if(null==e)throw new lt(t.metadata,"함수 참조의 범위를 벗어났습니다.");return e}if(t instanceof b){if(n.funs.length!==n.args.length)throw Error("Assertion Error: Environment has "+n.funs.length+" funs and "+n.args.length+" args.");const e=Gt(n.args,-t.relF-1);if(null==e)throw new lt(t.metadata,"존재하지 않는 함수에 대한 인수 참조를 시도했습니다.");const r=Ht(Jt(t.relA,n)),[i]=bt(t.metadata,[r],[A]),s=i.value;if(s<0||s>e.length)throw new lt(t.metadata,`${s}번째 인수를 참조하는데 ${e.length}개의 인수만 받았습니다.`);return e[Number(s)]}if(t instanceof N){var e=n.funs.slice(),r=new I(e,n.args,n.utils),i=new T(t.body,r);return r.funs.push(i),i}if(t instanceof M){var s=new q(t.fun,n,null),o=t.argv.map(function(t){return new q(t,n,null)});return Qt(t.metadata,s,!0)(t.metadata,o)}throw Error("Unexpected expression: "+t)}function Qt(t,n,e=!1){if(mt(n))return function(t,n,e){!function(t){if(!zt){for(const n of Wt)Object.assign(Rt,n(Qt,Ht,t));zt=!0}}(e);const r=tt(n),i=Rt[r];if(i)return i;throw new ht(t,`${r}이라는 이름의 기본 제공 함수를 찾지 못했습니다.`)}(t,Number(n.expr.value),n.env.utils);const r=e?R:[L],[i]=bt(t,[Ht(n)],r);return i instanceof L?i.execute.bind(i):i instanceof j?function(t,n){return Nt(t,n,2),n[i.value?0:1]}:i instanceof P?function(t,n){Nt(t,n,1);const e=Ht(n[0]).asKey(Ht),r=i.value[e];if(r)return r;throw new ht(t,`사전에 다음 표제가 없습니다: ${e}`)}:i instanceof B?function(t,n){Nt(t,n,1);const e=Ht(n[0]),[r]=bt(t,[e],[A]);if(0n===r.value||1n===r.value)return new F(i.value.toVector()[Number(r.value)]);throw new ut(t,`복소수 객체의 ${r.value}번째 요소를 접근하려고 했습니다.`)}:function(t,n){Nt(t,n,1);const e=Ht(n[0]),[r]=bt(t,[e],[A]),s=Number(r.value);try{return i instanceof C?new C(function(t,n){const e=n<0?n+t.byteLength:n;if(e<0||e>=t.byteLength)throw Error(`길이 ${t.byteLength}의 바이트열의 ${n}번째 요소를 요청했습니다.`);return t.slice(e,e+1)}(i.value,s)):i instanceof _?new _(Gt(i.value,s)):Gt(i.value,s)}catch(n){if(n instanceof Error)throw new lt(t,n.message);throw n}}}async function Xt(t,n){const e=t=>Xt(t,n);for(;t instanceof S;)t=await t.continuation(e,n);return t}async function tn(t,n,e,r){const i=t=>tn(t,n,e,r);if((t=n(t))instanceof S){t=await Xt(t,e);const n=await i(t);return r?"IO("+n+")":n}if(t instanceof O)return"["+(await Promise.all(t.value.map(i))).join(", ")+"]";if(t instanceof P){const n=t.value,e=t.keys();return"{"+(await Promise.all(e.map(async t=>t+": "+await i(n[t])))).join(", ")+"}"}return t instanceof Z?"<예외: ["+(await Promise.all(t.value.map(i))).join(", ")+"]>":t.format(n)}async function nn(t,n,e,r,i=!0){const s=et(t,n),o=new I([],[],r),a=s.map(t=>Jt(t,o));return Promise.all(a.map(t=>tn(t,Ht,e,i)))}async function en(t,n,e,r,i){const s=new d("<main>",0,0,0,""),o=e.map(t=>new _(t)),a=et(t,n);if(0===a.length)return 0;if(a.length>1){const t=new Z(a.map(t=>t.metadata),`모듈에는 표현식이 하나만 있어야 하는데 ${a.length}개가 있습니다.`,[]);throw new x(t)}const u=new I([],[],i);let c=Ht(Jt(a[0],u));c instanceof L&&(c=Ht(Qt(s,c)(s,o))),c instanceof S&&(c=await Xt(c,r));const[h]=bt(s,[c],[A,k]);return h instanceof k?0:Number(h.value)}export{nn as main,en as run};
//# sourceMappingURL=main.js.map
